\documentclass{amsart}

\input{decl-db}

\def\Rul{{\bf Rul}}
\def\dRul{{\bf dRul}}
\def\j{\bar{j}}
\def\Str{{\bf Str}}
\def\Mor{{\rm Mor}}

\begin{document}

\title{Ruled Spaces}

\author{David I. Spivak}

\maketitle

\begin{definition}

Let $\mcC$ be a category.  A {\em ruler in $\mcC$} consists of a pair $(C,J)$, where $C\in\Ob(\mcC)$ and $J=\{j_\alpha\taking c_\alpha\to C\}$ is a set of morphisms in $\mcC$.

A morphism of rulers $(C,J)\to(D,K)$ consists of a morphism $f\taking C\to D$ in $\mcC$ such that, for each $j\taking c\to C$ in $J$ there is a $k\taking d\to D$ in $K$ and a map $c\to d$ such that the diagram $$\xymatrix{c\ar[r]\ar[d]_j&d\ar[d]^k\\C\ar[r]_f&D}$$ commutes.

With these definitions, we have defined the {\em category of rulers on $\mcC$}, denoted $\Rul_\mcC$.  If $\mcC$ is understood, we may write $\Rul$ to denote $\Rul_\mcC$.

\end{definition}

\begin{definition}

Let $\mcR\ss\Rul_\mcC$ denote a subcategory, and let $U\taking\mcR\to\mcC$ denote the functor $(C,J)\mapsto C$.  For each $C\in\Ob(\mcC)$, we call $U^\m1(C)\ss\mcR$ {\em the subcategory of trait classifications on $C$}.  Its objects are called {\em trait classifications on $C$} and its morphisms are called {\em refinements}.  We call a map $j\taking c\to C$ a {\em trait class} if there exists a trait classification $(C,J)\in U^\m1(C)$ on $C$ with $j\in J$.

We say that $\mcR$ is {\em a topological category of rulers} if the associated trait classifications constitute covering families for a Grothendieck topology on $\mcC$.  Precisely, we require the following axioms to hold: \begin{enumerate}\item For each trait class $j\taking c\to C$ on $C$ and each map $D\to C$ in $\mcC$, the fiber product $c\cross_CD$ exists in $\mcC$. \item For any map $f\taking D\to C$ in $\mcC$ and any trait classification $J\in U^\m1(C)$ on $C$, the pullback $f^*(J)=\{f^*(j)| j\in J\}$ is a trait classification on $D$.\item If $J=\{j_\alpha\taking c_\alpha\to C\}$ is a trait classification on $C$ and for each $j_\alpha\in J$, the set $K_\alpha=\{k_{\alpha,\beta}\taking b_{\alpha,\beta}\to c_\alpha\}$ is a trait classification on $c_\alpha$, then the family of composites $$\bigcup_{j_\alpha\in J} \{b_{\alpha,\beta}\To{j_\alpha\circ k_{\alpha,\beta}}C |k_{\alpha,\beta}\in K_\alpha\}$$ is a trait classification on $C$.\item If $f\taking C\to D$ is an isomorphism in $\mcC$ then the singleton set $\{f\}$ is a trait classification on $D$.\end{enumerate}

\end{definition}

\begin{lemma}

Let $\mcR\ss\Rul_\mcC$ be a topological category of rulers.  If $A\To{f}B$ and $B\To{g}C$ are trait classes, then $A\To{g\circ f}C$ is a trait class.

\end{lemma}

\begin{proof}

There is a trait classification $(B,J)$ with $f\in J$ and a trait classification $(C,K)$ with $g\in K$.  The local character of trait classifications implies that $g\circ f$ is a trait class.

\end{proof}

Got the following from Lurie DAG 5.

\begin{definition}

We say that a topological category of rulers $\mcR\ss\Rul_\mcC$ is {\em a geometric category of rulers} if \begin{enumerate}\item The category $\mcC$ is small, it admits finite limits, and it is idempotent complete\item Suppose given a commutative triangle $$\xymatrix{&Y\ar[d]^g\\X\ar[ru]^f\ar[r]_h&Z}$$ where $g$ and $h$ are trait classes.  Then $f$ is a trait class.\item Any retract of a trait class is a trait class.\end{enumerate}

\end{definition}

\begin{definition}

Let $\mcR\ss\Rul_\mcC$ denote a geometric category of rulers, and let $\mcG\ss\mcR$ denote a subcategory.  We say that $\mcR$ is {\em generated by} $\mcG$ if every object of $\mcR$ is the limit of some finite diagram in $\mcG$. 

\end{definition}

\begin{definition}

A geometric category of rulers $\mcR\ss\Rul_\mcC$ is called {\em comprehendible} if \begin{enumerate}\item each trait classification $J$ is a finite set,\item each trait class $j$ is a monomorphism in $\mcC$, and \item there exists a finite subcategory $\mcG\ss\mcR$ that generates $\mcR$. \end{enumerate}

\end{definition}

\begin{definition}

Let $(C,J)$ denote a ruler in $\mcC$.  We say that a map $j\taking c\to C$ in $J$ is {\em atomic} if, for all 

\end{definition}

\section{Old}

Let $\Str$ denote the category of strings.

\begin{definition}

Let $\mcC$ be a category.  A {\em ruler in $\mcC$} consists of a triple $(C,J,N)$ where $C\in\Ob(\mcC)$ is an object, $J=\{j_i\taking c_i\to C\}_{i=1}^n$ is a finite set of morphisms in $\mcC$, and $N\taking J\to\Str$ is simply a function.  We call $C$ the {\em trait space}, $J$ the {\em set of traits}, and $N$ the {\em trait names} for the ruler $(C,J,N)$.

A morphism of rulers $(C,J,M)\to (D,K,N)$ consists of a morphism $f\taking C\to D$ in $\mcC$ such that, for each $j\taking c\to C$ in $J$ there is a $k\taking d\to D$ in $K$ and a map $c\to d$ such that the diagram $$\xymatrix{c\ar[r]\ar[d]_j&d\ar[d]^k\\C\ar[r]_f&D}$$ commutes.  There is no condition on the trait names $M,N$.

With these definitions, we have defined the {\em category of rulers on $\mcC$}, denoted $\Rul_\mcC$.  If $\mcC$ is understood, we may write $\Rul$ to denote $\Rul_\mcC$.

There is a functor $\Rul_\mcC\to\mcC$ sending $(C,J,N)\to C$, called the underlying space functor.  The fiber of this functor over an object $C$ is called the {\em category of rulings on $C$}, and a triple $(C,J,N)$ is called {\em a ruling on $C$}.

\end{definition}

\begin{lemma}

If $\mcC$ is closed under taking finite limits, then so is $\Rul_\mcC$.

\end{lemma}

\begin{definition}

Let $C\in\mcC$ be an object.  A ruling $(C,J,N)$ on $C$ is called {\em indiscrete} if $J=\{\id_C\taking C\to C\}$ is the set consisting of just the identity morphism on $C$.  

\end{definition}

\begin{definition}

Suppose that $\mcC$ is a category that is closed under taking finite limits and that $\mcR\ss\Rul_\mcC$ is a subcategory of the category of rulers on $\mcC$.  Let $T\ss\Mor(\mcR)$ be defined as the collection of all traits $$T:=\bigcup_{(C,J,N)\in\mcR}J.$$  We call $\mcR$ {\em a good category of rulers} if it satisfies the following conditions:\begin{enumerate}\item $\mcR\ss\Rul_\mcC$ is a full subcategory that is closed under taking finite limits,\item If $(C,J,N)\in\mcR$ is an object, then for any $j\taking c\to C$ in $J$, there exists an indiscrete ruling $(C,\{\id_C\},N)$  in $\mcR$, \item if $(C,J,N)\in\mcR$ is an object then there exists an indiscrete ruling $(C,\{\id_C\},N)$ in $\mcR$, and \item there exists an injective map $Name\colon T\to\Str$ such that, for each $(C,J,N)\in\mcR$ the diagram $$\xymatrix{J\ar[r]\ar[d]_N&T\ar[dl]^{Name}\\\Str}$$ commutes.  Note that $Name$ is unique if it exists.\end{enumerate}

\end{definition}

\begin{example}

If $\mcC$ is a site, i.e. a category equipped with a Grothendieck topology, then each finite covering family $J=\{j_i\taking c_i\to C\}_{i=1}^n$ gives a ruler $(C,J)$ in $\mcC$.

\end{example}

\section{Old}

We begin by defining the category of rulers.  Given a topological space $X$, let $\Op(X)$ denote its set of open sets (or category of open inclusions).

\begin{definition}

A {\em ruler} is a pair $(R,J)$, where $R$ is a topological space, and $J=\{j_1,\ldots,j_n\}\ss\Op(R)$ is a finite set of open subsets of $R$ that together constitute a covering of $R$.  If $J$ is understood, we may write $R$ to denote the ruler $(R,J)$.

A morphism of rulers $f\taking (R,J)\to(S,K)$ consists of a continuous map $f\taking R\to S$ such that, for each open set $j\in J$ there exists a $k\in K$ such that $j\ss f^\m1(k)$.

With these definitions, we have defined the {\em category of rulers}, denoted $\Rul$.

\end{definition}

\begin{example}

\begin{enumerate}

\item A finite set $R$ canonically has the structure of a ruler $(R,R)$.  The initial and the terminal objects of the category of rulers are of this form.
\item If $R$ is a topological space, then the single open set $\{R\}\ss\Op(R)$ is a cover.  We denote by $\bar{R}$ the ruler $(R,\{R\})$.
\item If $(R,J)$ is a ruler and $j\in J$ is an open set, then $\j:=(j,\{j\})$ is a ruler, and there is a canonical morphism $\j\to (R,J)$ in the category of rulers. 
\item More generally, if $(R,J)$ is a ruler and $f\taking S\to R$ is a subspace, then one can take $K\ss\Op(S)$ to be the set of preimages $f^\m1(j)$ for $j\in J$.  Then $f$ gives a morphism $(S,K)\to(R,J)$.

\item Consider a ruler in the usual sense: a closed interval in $\RR$ together with $n$-many evenly spaced markings (of a distance $\epsilon$ from one another).  Take $R$ to be the topological space given by the interval, and take $J$ to be a cover given by $\epsilon$-balls around the marked points.  This is a ruler.  A morphism of rulers which leaves the underlying space fixed is simply a {\em refinement} of the cover.

\end{enumerate}

\end{example}

\begin{lemma}

The category $\Rul$ of rulers is closed under finite limits.  

\end{lemma}

\begin{proof}

It suffices to check that $\Rul$ is closed under equalizers and finite products.  Each is easy to check.

\end{proof}

\begin{definition}

A {\em demarcated ruler} is a triple $(R,J,N)$ where $(R,J)$ is a ruler and $N\taking J\to\Str$ is a function, called the {\em naming function}.  We often denote a demarcated ruler $(R,J,N)$ by its underlying ruler $(R,J)$ or simply by $R$, depending on context.

A morphism of demarcated rulers is simply a morphism of their underlying rulers.  We denote the category of demarcated rulers by $\dRul$.

\end{definition}

If $(R,J,N)$ is a demarcated ruler and $j\in J$ is an open set of $R$, then $\j:=(j,\{j\},N(j))$ is the induced demarcated ruler.

\begin{definition}

A {\em semantic system} a full subcategory $\mcR\ss\dRul$ such that, for every ruler $(R,J,N)\in\mcR$ and every open set $j\in J$, the ruler $\j$ is also an object in $\mcR$.  

Given a semantic system $\mcR$, an {\em $\mcR$-description} is a functor $F\taking\mcR\to\Sets$ that preserves finite limits.  A morphism of $\mcR$-descriptions is just a natural transformation of functors.

\end{definition}

Note that if $F\taking\mcR\to\Sets$ is an description, $R=(R,J)\in\mcR$ is a ruler, and $j\in J$ is an element of the distinguished cover, then the natural map $F(\bar{j})\to F(R)$ is a monomorphism, because $F$ preserves finite limits and hence monomorphisms.

\begin{lemma}

Let $\mcR$ be a semantic system.  The category of $\mcR$-descriptions is closed under taking filtered colimits.

\end{lemma}

\begin{proof}

If $\mcS$ is any category, then a filtered colimit of functors $\mcS\to\Sets$, each of which preserves finite limits, will preserve finite limits as well.

\end{proof}

\begin{definition}

Let $\mcR$ be a semantic system.  A {\em preschema on $\mcR$} is a pair $(X,\mcO_X)$, where $X$ is a topological space and $\mcO_X$ is a sheaf of $\mcR$-descriptions.  Given an open set $U\ss X$ and a ruler $R\in\mcR$, we denote by $\mcO_X(U,R)$ the set $\mcO_X(U)(R)$.  

A morphism of preschemas is written $$(f,f^\sharp)\taking(X,\mcO_X)\to(Y,\mcO_Y),$$ where $f\taking X\to Y$ is a map of topological spaces and $f^\sharp\taking f^*\mcO_Y\to\mcO_X$ is a morphism of sheaves.

\end{definition}

Let $(X,\mcO_X)$ be a preschema and $U\ss X$ an open subset. For each ruler $R=(R,J)\in\mcR$, we can pretend that the set $\mcO_X(U,R)$ is a set of continuous maps $U\to R$.   To make this work, we need a locality condition.

\end{document}